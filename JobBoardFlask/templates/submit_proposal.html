{% extends "base.html" %}

{% block title %}Submit Proposal - {{ job['title'] }}{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Submit a Proposal</h1>
    <p>{{ job['title'] }}</p>
</div>

<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
    <!-- Proposal Form -->
    <div style="background: white; padding: 32px; border-radius: 12px; border: 1px solid #d5e0d5;">
        <h2 style="margin-bottom: 24px;">Job Details</h2>
        <p style="margin-bottom: 24px; color: #5e6d55;">{{ job['description'] }}</p>
        
        {% if job['budget'] %}
            <p style="margin-bottom: 16px;"><strong>Client Budget:</strong> ${{ job['budget'] }}</p>
        {% endif %}
        
        <hr style="margin: 32px 0; border: none; border-top: 1px solid #e8ede8;">
        
        <h2 style="margin-bottom: 24px;">Your Proposal</h2>
        
        <form method="POST" action="{{ url_for('submit_proposal', job_id=job['id']) }}">
            <div class="form-group">
                <label for="cover_letter">Cover Letter</label>
                <textarea id="cover_letter" name="cover_letter" required 
                          placeholder="Explain why you're a great fit for this job. Highlight relevant experience and how you'll approach the project."></textarea>
                <small style="color: #5e6d55;">Be specific and demonstrate your expertise</small>
            </div>

            <div class="form-group">
                <label for="bid_amount">Your Bid ($)</label>
                <input type="number" id="bid_amount" name="bid_amount" step="0.01" required 
                       placeholder="Enter your bid amount">
            </div>

            <div class="form-group">
                <label for="delivery_time">Delivery Time (days)</label>
                <input type="number" id="delivery_time" name="delivery_time" 
                       placeholder="How many days will you need?">
            </div>

            <div style="display: flex; gap: 12px; margin-top: 32px;">
                <button type="submit" class="btn">Submit Proposal</button>
                <a href="{{ url_for('view_job', job_id=job['id']) }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
    
    <!-- Your Profile Summary -->
    <div>
        <div style="background: white; padding: 24px; border-radius: 12px; border: 1px solid #d5e0d5;">
            <h3 style="margin-bottom: 16px;">Your Profile</h3>
            
            {% if profile and profile['title'] %}
                <p style="font-weight: 600; margin-bottom: 8px;">{{ profile['title'] }}</p>
            {% endif %}
            
            {% if profile and profile['hourly_rate'] %}
                <p style="margin-bottom: 16px;"><strong>Hourly Rate:</strong> ${{ profile['hourly_rate'] }}/hr</p>
            {% endif %}
            
            {% if profile and profile['rating'] and profile['rating'] > 0 %}
                <p style="margin-bottom: 16px;">
                    <strong>Rating:</strong> ‚≠ê {{ profile['rating'] }} ({{ profile['reviews_count'] }} reviews)
                </p>
            {% endif %}
            
            {% if profile and profile['total_jobs'] > 0 %}
                <p style="margin-bottom: 16px;"><strong>Completed Jobs:</strong> {{ profile['total_jobs'] }}</p>
            {% endif %}
            
            <a href="{{ url_for('edit_profile') }}" class="btn btn-outline btn-small" style="margin-top: 16px; width: 100%;">Edit Profile</a>
        </div>
    </div>
</div>
{% endblock %}
